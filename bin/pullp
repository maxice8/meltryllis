#!/usr/bin/ion
let _REALBASE = $(alpine-stable-prefix)
if exists -s _REALBASE
	let _REALBASE ++= -stable
else
	let _REALBASE = master
end

let remote = $(guess-remote)
if not exists -s remote
	exit 1
end

let branch = $(git-current-branch)
let url = $(git config --local remote.$remote.url)

git pull --quiet $remote --rebase $_REALBASE && \
	printok "Rebased '$branch' on '$remote/$_REALBASE' from '$url'" || \
	printerr "Failed to rebase '$branch' on '$remote/$_REALBASE' from '$url'"
