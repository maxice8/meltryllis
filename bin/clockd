#!/bin/sh

clock=1

print_clock() {
	echo " $(date "+%I:%M:%p") $(TZ=Europe/Berlin date "+%I:%M:%p") $(TZ=Asia/Tokyo date "+%I:%M:%p")"
}

print_date() {
	echo " $(date +%d/%m/%Y)"
}

toggle() {
	if [ "$clock" = 1 ]; then
		clock=0
		print_date

		return
	fi

	if [ "$clock" = 0 ]; then
		clock=1
		print_clock

		return
	fi
}

trap "toggle" USR1

while :; do
	[ "$clock" = 1 ] && print_clock || print_date
	sleep 60 &
	wait
done
