#!/bin/sh

# Get the current playing song
current=$(mpc current)
# If mpd isn't running it will return an empty string, we don't want to display that
if [ -z "$current" ]; then
    current="-"
fi

track="$(mpc playlist | rofi -dmenu -p "$current" -theme themes/playmenu.rasi -i)"

[ -z "$track" ] && exit 0

artist="$(printf "%s\\n"  "$track" | grep -o '^.* -' | head -c -3 | awk '{$1=$1};1')"
title="$(printf "%s\\n"  "$track" | grep -o ' - .*' | tail -c +4 | awk '{$1=$1};1')"


mpc searchplay artist "$artist" title "$title" >/dev/null
